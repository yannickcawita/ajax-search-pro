(function(c){let k=window.WPD.ajaxsearchpro.helpers;window.WPD.ajaxsearchpro.addons.add(new function(){this.name="Elementor Widget Fixes";this.init=function(){k.Hooks.addFilter("asp/init/etc",this.fixElementorPostPagination,10,this);k.Hooks.addFilter("asp/live_load/selector",this.fixSelector,10,this);k.Hooks.addFilter("asp/live_load/start",this.start,10,this);k.Hooks.addFilter("asp/live_load/replacement_node",this.fixElementorLoadMoreResults,10,this);k.Hooks.addFilter("asp/live_load/finished",this.finished,
10,this)};this.fixSelector=function(b){-1<b.indexOf("asp_es_")&&(b+=" .elementor-widget-container");return b};this.start=function(b,d,e,a){c("form",d.n.searchsettings).serialize()+d.n.text.val().trim()==d.lastSuccesfulSearch&&0<c(a).find(".e-load-more-spinner").length&&c(a).css("opacity",1)};this.finished=function(b,d,e,a){a=c(a);!1!==e.indexOf("asp_es_")&&"undefined"!=typeof elementorFrontend&&"undefined"!=typeof elementorFrontend.init&&0==a.find(".asp_elementor_nores").length&&(e=a.parent().data("widget_type"),
""!=e&&"undefined"!=typeof jQuery&&elementorFrontend.hooks.doAction("frontend/element_ready/"+e,jQuery(a.parent().get(0))),this.fixElementorPostPagination(d,b),d.n.s.trigger("asp_elementor_results",[d.o.id,d.o.iid,a.parent().get(0)],!0,!0))};this.fixElementorPostPagination=function(b,d){let e=this,a=c(".asp_es_"+b.o.id);d="undefined"==typeof d?location.href:d;if(0<a.length){e.elementorHideSpinner(a.get(0));var g=d.indexOf("?");if(0<=g){let h=d.substring(g+1);h&&(h=h.replace(/&asp_force_reset_pagination=1/gmi,
""),0<a.find(".e-load-more-anchor").length&&0==a.find(".elementor-pagination a").length?(g=function(f){f.preventDefault();f.stopPropagation();if(!b.searching){f=""==a.data("page")?2:parseInt(a.data("page"))+1;let l=h.split("&page=");a.data("page",f);b.showLoader();e.elementorShowSpinner(a.get(0));b.liveLoad(".asp_es_"+b.o.id,d.split("?")[0]+"?"+l[0]+"&page="+f,!1,!0)}},a.find(".e-load-more-anchor").next(".elementor-button-wrapper").find("a").attr("href",""),a.find(".e-load-more-anchor").next(".elementor-button-wrapper").offForced().on("click",
g),a.find(".asp_e_load_more_anchor").on("asp_e_load_more",g)):(a.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a").each(function(){let f=c(this).attr("href");0>f.indexOf("asp_ls=")&&0>f.indexOf("asp_ls&")&&(0>f.indexOf("?")?c(this).attr("href",f+"?"+h):c(this).attr("href",f+"&"+h))}),a.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a").on("click",function(f){f.preventDefault();f.stopImmediatePropagation();f.stopPropagation();
b.showLoader();b.liveLoad(".asp_es_"+b.o.id,c(this).attr("href"),!1,!0)})))}}};this.fixElementorLoadMoreResults=function(b,d,e,a){a=c(e).closest("div[data-settings]").data("settings");let g=c(e).find(".asp_e_load_more_anchor");if(null!=a&&""!=a&&(a=JSON.parse(a),"load_more_infinite_scroll"==a.pagination_type&&0==g.length&&(c(".e-load-more-anchor").css("display","none"),c(e).append('<div class="asp_e_load_more_anchor"></div>'),g=c(e).find(".asp_e_load_more_anchor"),a=function(){g.inViewPort(50)&&(g.trigger("asp_e_load_more"),
g.remove())},d.documentEventHandlers.push({node:window,event:"scroll",handler:a}),c(window).on("scroll",a)),0<c(b).find(".e-load-more-spinner").length)){c(e).removeClass("e-load-more-pagination-loading");d=c("form",d.n.searchsettings).serialize()+d.n.text.val().trim()!=d.lastSuccesfulSearch;a=c(e).find(".e-load-more-anchor").next(".elementor-button-wrapper");let h=c(e).find(".e-load-more-message");if(0<c(b).find("article").length){b=c(b).find("article").parent().get(0).innerHTML;let f=c(e).data("asp-previous-data");
""==f||d?(c(e).find("article").parent().get(0).innerHTML=b,c(e).data("asp-previous-data",b),a.css("display","block"),h.css("display","none")):f==b?(a.css("display","none"),h.css("display","block"),g.remove()):(c(e).find("article").parent().get(0).innerHTML+=b,c(e).data("asp-previous-data",b))}else a.css("display","none"),h.css("display","block"),g.remove();return null}return b};this.elementorShowSpinner=function(b){c(b).addClass("e-load-more-pagination-loading");c(b).find(".e-load-more-spinner>*").addClass("eicon-animation-spin");
c(b).css("opacity",1)};this.elementorHideSpinner=function(b){c(b).removeClass("e-load-more-pagination-loading");c(b).find(".eicon-animation-spin").removeClass("eicon-animation-spin")}})})(WPD.dom);
