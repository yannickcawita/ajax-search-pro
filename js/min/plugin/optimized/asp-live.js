(function(e){let f=window.WPD.ajaxsearchpro.helpers;e.fn.extend(window.WPD.ajaxsearchpro.plugin,{liveLoad:function(d,k,c,l){function n(b){b=f.Hooks.applyFilters("asp/live_load/raw_data",b,a);var h=new DOMParser;let p=h.parseFromString(b,"text/html"),m=e(p);a.o.statistics&&a.stat_addKeyword(a.o.id,a.n.text.val());if(""!=b&&0<m.length&&0<m.find(d).length){b=b.replace(/&asp_force_reset_pagination=1/gmi,"");b=b.replace(/%26asp_force_reset_pagination%3D1/gmi,"");b=b.replace(/&#038;asp_force_reset_pagination=1/gmi,
"");f.isSafari()&&(b=b.replace(/srcset/gmi,"nosrcset"));b=f.Hooks.applyFilters("asp_live_load_html",b,a.o.id,a.o.iid);b=f.wp_hooks_apply_filters("asp_live_load_html",b,a.o.id,a.o.iid);m=e(h.parseFromString(b,"text/html"));h=m.find(d).get(0);h=f.Hooks.applyFilters("asp/live_load/replacement_node",h,a,g.get(0),b);null!=h&&g.get(0).parentNode.replaceChild(h,g.get(0));g=e(d).first();c&&(document.title=p.title,history.pushState({},null,k));e(d).first().find(".woocommerce-ordering").on("change","select.orderby",
function(){e(this).closest("form").trigger("submit")});if(1==a.o.singleHighlight)e(d).find("a").on("click",function(){localStorage.removeItem("asp_phrase_highlight");""!=f.unqoutePhrase(a.n.text.val())&&localStorage.setItem("asp_phrase_highlight",JSON.stringify({phrase:f.unqoutePhrase(a.n.text.val()),id:a.o.id}))});f.Hooks.applyFilters("asp/live_load/finished",k,a,d,g.get(0));ASP.initialize();a.lastSuccesfulSearch=e("form",a.n.searchsettings).serialize()+a.n.text.val().trim();a.lastSearchData=b}a.n.s.trigger("asp_search_end",
[a.o.id,a.o.iid,a.n.text.val(),b],!0,!0);a.gaEvent("search_end",{results_count:"unknown"});a.gaPageview(a.n.text.val());a.hideLoader();g.css("opacity",1);a.searching=!1;""!=a.n.text.val()&&a.n.proclose.css({display:"block"})}if("body"==d||"html"==d)return console.log("Ajax Search Pro: Do not use html or body as the live loader selector."),!1;""==ASP.pageHTML&&"undefined"===typeof ASP._ajax_page_html&&(ASP._ajax_page_html=!0,e.fn.ajax({url:location.href,method:"GET",success:function(b){ASP.pageHTML=
b},dataType:"html"}));c="undefined"==typeof c?!0:c;l="undefined"==typeof l?!1:l;let q=".search-content #content #Content div[role=main] main[role=main] div.theme-content div.td-ss-main-content main.l-content #primary".split(" ");"#main"!=d&&q.unshift("#main");if(1>e(d).length&&(q.forEach(function(b,h){if(0<e(b).length)return d=b,!1}),1>e(d).length))return console.log("Ajax Search Pro: The live search selector does not exist on the page."),!1;d=f.Hooks.applyFilters("asp/live_load/selector",d,this);
let g=e(d).first(),a=this;a.searchAbort();g.css("opacity",.4);f.Hooks.applyFilters("asp/live_load/start",k,a,d,g.get(0));l||1!=a.n.searchsettings.find("input[name=filters_initial]").val()||""!=a.n.text.val()?(a.searching=!0,a.post=e.fn.ajax({url:k,method:"GET",success:function(b){n(b)},dataType:"html",fail:function(b){g.css("opacity",1);b.aborted||(g.html("This request has failed. Please check your connection."),a.hideLoader(),a.searching=!1,a.n.proclose.css({display:"block"}))}})):window.WPD.intervalUntilExecute(function(){n(ASP.pageHTML)},
function(){return""!=ASP.pageHTML})},getCurrentLiveURL:function(){var d="asp_ls="+f.nicePhrase(this.n.text.val());let k="&",c=window.location.href;c=-1<c.indexOf("asp_ls=")?c.slice(0,c.indexOf("asp_ls=")):c;c=-1<c.indexOf("asp_ls&")?c.slice(0,c.indexOf("asp_ls&")):c;c=-1<c.indexOf("p_asid=")?c.slice(0,c.indexOf("p_asid=")):c;c=-1<c.indexOf("asp_")?c.slice(0,c.indexOf("asp_")):c;-1===c.indexOf("?")&&(k="?");d=c+k+d+"&asp_active=1&asp_force_reset_pagination=1&p_asid="+this.o.id+"&p_asp_data=1&"+e("form",
this.n.searchsettings).serialize();return d=d.replace("?&","?")}})})(WPD.dom);
